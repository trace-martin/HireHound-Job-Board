<div class="container" data-user-id="{{user_id}}">
  <div class="row">
    <div class="col d-flex justify-content-between align-items-center">
      <h1>Search Results</h1>
      {{#if logged_in}}
      <a data-bs-toggle="offcanvas" href="#offcanvasMetrics">Metrics</a>
      {{else}}
      <p>Log in for more options</p>
      {{/if}}
    </div>
  </div>
  <div class="row vh-100">
    <div class="col-6 h-75 overflow-y-scroll">
      {{#each jobsData.results as |job|}}
        <div class="card mb-2" data-job-data="{{to_json job}}">
          <div class="card-header">
            <div class="card-title">
              {{job.role}}
            </div>
          </div>
          <div class="card-body">
            <p class="card-text">Company: {{job.company_name}}</p>
            <p class="card-text">
              Remote:
              {{#if job.remote}}
                Yes
              {{else}}
                No
              {{/if}}
            </p>
          </div>
        </div>
      {{/each}}
    </div>
    <div class="col-6 h-75 overflow-y-scroll">
      <div class="card visually-hidden" id="single-job-card">
        <div class="card-header d-flex justify-content-between">
          <div class="card-title" id="job-title"></div>
          {{#if logged_in}}
            <button class="btn btn-primary">Save</button>
          {{else}}
            <a href="/login">Log in for more options</a>
          {{/if}}
        </div>
        <div class="card-body">
          <div id="job-description"></div>
        </div>
      </div>
    </div>
  </div>
</div>

{{#if logged_in}}
  <div class="offcanvas offcanvas-end w-50" tabindex="-1" id="offcanvasMetrics">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title">Metrics</h5>
      <button
        type="button"
        class="btn-close"
        data-bs-dismiss="offcanvas"
        aria-label="Close"
      ></button>
    </div>
    <div class="offcanvas-body">
      <div
        class="container"
        id="charts"
        data-jobs-data="{{to_json jobsData.results}}"
      >
        {{!-- <div class="row"> --}}
          <div class="row">
            <canvas id="jobs-by-company"></canvas>
          </div>
          <div class="row">
            <canvas id="remote-jobs"></canvas>
          </div>
          <div class="row">
            <canvas id="remote-jobs-by-city"></canvas>
          </div>
        {{!-- </div> --}}
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="./js/renderCharts.js"></script>
{{/if}}

<script src="js/searchResults.js"></script>